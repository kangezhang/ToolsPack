# Python 依赖分析工具

一个简单易用的 Python 项目依赖分析工具，自动扫描项目并生成 `requirements.txt` 文件。

## ✨ 特性

- 🔍 **智能扫描** - 自动递归扫描项目所有 `.py` 文件
- 📦 **依赖识别** - 准确识别第三方包，自动排除标准库
- 🔢 **版本检测** - 自动检测已安装包的版本号
- 🔄 **智能合并** - 可合并现有 requirements.txt，只添加缺失的依赖
- 💾 **自动备份** - 生成新文件前自动备份旧文件
- 🎨 **美观界面** - 深色主题，操作简单直观
- 🖥️ **跨平台** - 支持 Windows 和 macOS

## 🚀 快速开始

### 运行要求

- Python 3.6 或更高版本
- 无需安装任何第三方依赖（仅使用标准库）

### 运行方式

直接运行 Python 脚本：

```bash
python pytools_dependency_analyzer.py
```

## 📖 使用说明

### 基本流程

1. **选择项目** - 点击"📁 浏览"选择你的 Python 项目目录
2. **分析项目** - 点击"🔍 分析"按钮开始扫描
3. **查看结果** - 在列表中查看检测到的所有依赖及其状态
4. **生成文件** - 点击"💾 生成 requirements.txt"创建依赖文件

### 配置选项

- ✅ **包含版本号** - 生成 `package==1.0.0` 格式（推荐）
- ✅ **合并现有 requirements.txt** - 保留原有依赖，只添加新的
- ✅ **备份旧文件** - 生成新文件前自动备份（带时间戳）
- ☐ **包含 PyInstaller** - 如果需要打包项目，勾选此项

### 其他功能

- 🔍 **搜索过滤** - 在搜索框输入关键词快速查找依赖
- 📋 **复制到剪贴板** - 一键复制依赖列表
- 📂 **打开项目目录** - 快速打开项目文件夹
- 💬 **操作日志** - 详细记录每次操作过程

## 🎯 工作原理

1. **扫描文件** - 遍历项目目录，查找所有 `.py` 文件
2. **AST 解析** - 使用 Python AST 解析 import 语句
3. **过滤标准库** - 排除 Python 内置标准库模块
4. **版本检测** - 使用 `importlib.metadata` 检测包版本
5. **生成文件** - 按字母顺序生成规范的 requirements.txt

## 📝 示例

### 生成的 requirements.txt

```
# Generated by Python Dependency Analyzer
# Date: 2025-10-21 10:30:45
# Project: /Users/username/my_project

numpy==1.24.0
pandas==2.0.0
pyinstaller==6.3.0
requests==2.31.0
```

## ⚠️ 注意事项

- 工具会自动排除 `venv`、`env`、`.venv`、`__pycache__` 等目录
- 某些包的导入名和安装名不同（如 `PIL` → `Pillow`），工具已内置常见映射
- 如果项目中有语法错误的 Python 文件，该文件会被跳过并在日志中提示
- 建议在虚拟环境中运行，以确保版本检测准确

## 🤝 常见问题

**Q: 为什么有些包显示"未安装"？**
 A: 这些包在你的代码中被导入，但当前环境中没有安装。需要手动安装后重新分析。

**Q: 可以只生成未安装的包吗？**
 A: 工具会检测所有导入的第三方包。建议在干净的虚拟环境中运行以获得准确结果。

**Q: 支持 Python 2 吗？**
 A: 不支持。工具使用 Python 3.6+ 的特性开发。

## 📄 许可证

MIT License

感谢所有为 Python 生态做出贡献的开发者！

------

**提示**：使用前建议先在测试项目上试用，确保符合你的需求。